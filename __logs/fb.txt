Tôi cần sửa @/docs/spec/main-app.md để các prompt trả về rich field hơn. đồng thời cũng cần separate main-app.md thành các nested files. thay vì 1 master file quá to nhu vậy ở trong folder docs/spec/
Khi update Prompt như vậy, nhớ update các field liên quan tới database hay UI nhé. 
Chú ý: 
1. Tôi sẽ sử dụng dạng prompt kiểu này:
```
const maxItems = 5; // Biến giới hạn số lượng từ đồng nghĩa/trái nghĩa

const prompt = `
Bạn là một chuyên gia ngôn ngữ học và giáo dục. Nhiệm vụ của bạn là phân tích từ khóa "${word}" để giúp người học hiểu sâu và biết cách tư duy đoán nghĩa.

INPUT DATA:
- Target Word: "${word}"
- Sentence Context: "${sentenceContext}"
- Paragraph Context: "${paragraphContext}"
- Max Items per list: ${maxItems}

YÊU CẦU OUTPUT:
1. Trả về duy nhất một chuỗi JSON hợp lệ (RFC 8259).
2. Tuyệt đối KHÔNG kèm markdown (\`\`\`), không lời dẫn.
3. Các trường giải thích chính dùng Tiếng Việt.
4. Phần Synonyms/Antonyms: Giới hạn tối đa ${maxItems} từ mỗi loại, sắp xếp theo độ phổ biến/độ sát nghĩa giảm dần.

JSON SCHEMA:
{
  "meta": {
    "word": "${word}",
    "ipa": "Phiên âm IPA",
    "pos": "Từ loại (Noun/Verb...)",
    "cefr": "Trình độ (A1-C2)",
    "tone": "Sắc thái (Formal/Neutral/Irony...)"
  },
  "definitions": {
    "root_meaning": "Nghĩa gốc trong từ điển",
    "context_meaning": "Nghĩa trong câu này (dịch thoát ý để hợp văn cảnh)",
    "vietnamese_translation": "Từ/Cụm từ tiếng Việt tương đương nhất"
  },
  "inference_strategy": { // Phần mới: Hướng dẫn cách đoán nghĩa
    "clues": "Dấu hiệu nào trong câu giúp đoán nghĩa? (VD: Tiền tố 'un-', từ nối 'but', hoặc tân ngữ đi kèm...)",
    "reasoning": "Giải thích ngắn gọn quy trình suy luận để ra nghĩa của từ mà không cần tra từ điển"
  },
  "relations": {
    "synonyms": [ // Array of Objects
      {
        "word": "Từ đồng nghĩa 1",
        "ipa": "/ipa/",
        "meaning_en": "Định nghĩa ngắn bằng tiếng Anh",
        "meaning_vi": "Định nghĩa ngắn bằng tiếng Việt"
      }
    ],
    "antonyms": [
      {
        "word": "Từ trái nghĩa 1",
        "ipa": "/ipa/",
        "meaning_en": "Định nghĩa ngắn bằng tiếng Anh",
        "meaning_vi": "Định nghĩa ngắn bằng tiếng Việt"
      }
    ]
  },
  "usage": {
    "collocations": ["Các cụm từ thường đi kèm với từ này (nếu có)"],
    "example_sentence": "Một câu ví dụ khác (khác input)",
    "example_translation": "Dịch câu ví dụ"
  }
}
`;
```
cho phân tích từ.

2. Dạng này cho phân tích câu:
```
const prompt = `
Bạn là một chuyên gia ngôn ngữ học và biên tập viên cao cấp. Nhiệm vụ của bạn là phân tích sâu câu văn "${sentence}" và đề xuất các cách viết lại tối ưu hơn.

INPUT:
- Target Sentence: "${sentence}"
- Paragraph Context: "${paragraphContext}"

YÊU CẦU OUTPUT:
1. Trả về duy nhất JSON valid (RFC 8259).
2. KHÔNG markdown, KHÔNG lời dẫn.
3. Ngôn ngữ giải thích: Tiếng Việt.
4. Phần "rewrite_suggestions" phải giữ nguyên ý nghĩa gốc nhưng thay đổi văn phong/cấu trúc.

JSON SCHEMA:
{
  "meta": {
    "sentence": "${sentence}",
    "complexity_level": "Độ khó (Basic/Intermediate/Advanced)",
    "sentence_type": "Loại câu (Simple/Compound/Complex...)"
  },
  "semantics": {
    "main_idea": "Ý chính bao quát",
    "subtext": "Hàm ý/Ẩn ý (nếu có)",
    "sentiment": "Positive/Negative/Neutral"
  },
  "grammar_breakdown": {
    "subject": "Chủ ngữ",
    "main_verb": "Động từ chính",
    "object": "Tân ngữ/Bổ ngữ",
    "clauses": [ // Phân tách mệnh đề
      { "text": "Nội dung mệnh đề", "type": "Independent/Dependent..." }
    ]
  },
  "contextual_role": {
    "function": "Chức năng trong đoạn (Mở bài/Giải thích/Kết luận...)",
    "relation_to_previous": "Mối liên hệ với câu trước đó"
  },
  "key_components": [
    {
      "phrase": "Cụm từ hay/quan trọng",
      "type": "Idiom/Collocation/Grammar Pattern",
      "meaning": "Giải thích",
      "significance": "Cái hay của cụm từ này"
    }
  ],
  "rewrite_suggestions": [ // <--- NEW FEATURE
    {
      "style": "Formal/Academic",
      "text": "Phiên bản viết lại trang trọng (dùng cho báo cáo, văn bản)",
      "change_log": "Giải thích ngắn gọn thay đổi (ví dụ: Thay 'get' bằng 'obtain', dùng câu bị động...)"
    },
    {
      "style": "Simplified/Clear",
      "text": "Phiên bản đơn giản hóa (dùng cho người mới học, dễ hiểu)",
      "change_log": "Giải thích (ví dụ: Tách câu ghép thành câu đơn, dùng từ vựng A1...)"
    },
    {
      "style": "Native/Idiomatic",
      "text": "Phiên bản tự nhiên như người bản xứ",
      "change_log": "Giải thích (ví dụ: Dùng idiom X thay cho cách diễn đạt thông thường)"
    }
  ],
  "translation": {
    "literal": "Dịch sát nghĩa",
    "natural": "Dịch hay/thoát ý"
  }
}
`;
```

3. Dạng này cho phân tích đoạn:
```
const prompt = `
Bạn là một biên tập viên cao cấp, chuyên gia ngôn ngữ học và phê bình văn học. Nhiệm vụ của bạn là phân tích toàn diện đoạn văn được cung cấp dưới đây.

INPUT DATA:
- Paragraph: "${paragraph}"

YÊU CẦU XỬ LÝ:
1. Phân tích sâu cấu trúc, nội dung, cảm xúc và kỹ thuật viết.
2. Trả về kết quả dưới dạng JSON hợp lệ (RFC 8259).
3. Ngôn ngữ trong các trường giải thích (value) là Tiếng Việt.
4. Tuyệt đối không thêm text dẫn nhập hay markdown (như \`\`\`), chỉ trả về raw JSON string.

HƯỚNG DẪN JSON SCHEMA CHI TIẾT:
{
  "meta": {
    "type": "Xác định thể loại văn bản (Tự sự/Miêu tả/Nghị luận/Thuyết minh/Hành chính...)",
    "tone": "Xác định giọng điệu chủ đạo (Trang trọng/Thân mật/Châm biếm/Khách quan/Bi quan...)",
    "target_audience": "Dự đoán đối tượng độc giả mà đoạn văn hướng tới (Trẻ em/Chuyên gia/Đại chúng...)"
  },
  "content_analysis": {
    "main_topic": "Tóm tắt chủ đề chính hoặc luận điểm cốt lõi của đoạn văn trong 1 câu",
    "sentiment": {
      "label": "Nhãn cảm xúc (Positive/Negative/Neutral/Mixed)",
      "intensity": "Mức độ cảm xúc (1-10, với 10 là cực độ)",
      "justification": "Giải thích tại sao có cảm xúc này? (Dựa trên từ ngữ cảm thán hay nội dung sự việc?)"
    },
    "keywords": ["Danh sách 3-5 từ khóa quan trọng nhất phản ánh nội dung"]
  },
  "structure_breakdown": [ // Phân tích từng câu để vẽ lại bản đồ tư duy của đoạn
    {
      "sentence_index": 1, // Số thứ tự câu
      "snippet": "3-5 từ đầu của câu để nhận diện...",
      "role": "Vai trò của câu (Topic Sentence/Supporting Detail/Evidence/Example/Transition/Conclusion)",
      "analysis": "Giải thích ngắn gọn câu này đóng góp gì cho ý chính của đoạn?"
    }
    // ... tiếp tục cho các câu còn lại
  ],
  "coherence_and_cohesion": { // Đánh giá tính mạch lạc và liên kết
    "logic_score": "Điểm mạch lạc về ý (1-100). Các ý có sắp xếp hợp lý không?",
    "flow_score": "Điểm trôi chảy về từ ngữ (1-100). Chuyển ý có mượt mà không?",
    "transition_words": ["Liệt kê các từ nối (connectives) đã được sử dụng (ví dụ: Tuy nhiên, Hơn nữa...)"],
    "gap_analysis": "Chỉ ra những chỗ bị 'gãy' mạch hoặc chuyển ý đột ngột (nếu có)"
  },
  "stylistic_evaluation": {
    "vocabulary_level": "Đánh giá vốn từ (Cơ bản/Phong phú/Học thuật/Lặp từ)",
    "sentence_variety": "Đánh giá sự đa dạng cấu trúc câu (Có bị toàn câu đơn không? Có kết hợp câu ngắn dài không?)"
  },
  "constructive_feedback": {
    "critiques": [ // Danh sách các vấn đề cụ thể cần sửa
      {
        "issue_type": "Loại lỗi (Logic/Grammar/Vocabulary/Repetition/Style)",
        "description": "Mô tả chi tiết vấn đề đang gặp phải",
        "suggestion": "Đề xuất cách sửa cụ thể cho vấn đề này"
      }
    ],
    "better_version": "Viết lại đoạn văn này (Rewrite) sao cho hay hơn, mạch lạc hơn, khắc phục các lỗi đã nêu ở trên nhưng vẫn giữ nguyên ý gốc."
  }
}
`;
```

Lên plan để update từng phần